<?xml version="1.0" encoding="UTF-8"?>
<!--
 [y] hybris Platform
 
 Copyright (c) 2000-2014 hybris AG
 All rights reserved.
 
 This software is the confidential and proprietary information of hybris
 ("Confidential Information"). You shall not disclose such Confidential
 Information and shall use it only in accordance with the terms of the
 license agreement you entered into with hybris.
-->
 
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:int="http://www.springframework.org/schema/integration"
   xmlns:file="http://www.springframework.org/schema/integration/file"
   xmlns:p="http://www.springframework.org/schema/p"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/integration
       http://www.springframework.org/schema/integration/spring-integration.xsd
       http://www.springframework.org/schema/integration/file
       http://www.springframework.org/schema/integration/file/spring-integration-file.xsd">
 
 
 		<!-- General setup -->
 		
 		 <bean id="fileOrderComparator" class="de.hybris.platform.acceleratorservices.dataimport.batch.FileOrderComparator">
		<property name="prefixPriority">
			<map>
				<!-- default priority is 0 -->
				<entry key="classification_attributes" value="19" />
				<entry key="classification_attribute_values" value="18" />
				<entry key="classification_class" value="17" />
				<entry key="class_attribute_assignment" value="16" />
				<entry key="category" value="15" />
				<entry key="mplproduct" value="14" />
				<entry key="variant_product" value="13" />
				<entry key="seller" value="12" />
				<entry key="richattribute_seller" value="11" />
				<entry key="richattribute_product" value="10" />
				<entry key="brand" value="9" />
				<entry key="seocontent" value="8" />
				<entry key="global_identifier" value="7" />
				<entry key="product_reference" value="6" />
				<entry key="product_feature" value="5" />
				<entry key="mplmedia" value="4" />
				<entry key="mplmedia_container" value="3" />
				<entry key="mplmedia_product" value="2" />
				<entry key="category_media" value="1" /> 
				<entry key="product_sizeguide" value="0" />
				<entry key="sales_category" value="0" />
				
					</map>
		</property>
	</bean>
 
    <bean id="baseDirectoryMarketplaceCategory" class="java.lang.String">
        <constructor-arg value="#{baseDirectory}/${tenantId}/marketplace-import" />
    </bean>
 
    <!-- 1) Scan for files -->
    
    <file:inbound-channel-adapter id="batchFilesMarketplaceCategory" directory="#{baseDirectoryMarketplaceCategory}"
        filename-regex="^(.*)-(\d+)\.csv" comparator="fileOrderComparator">
        <int:poller fixed-rate="1000" />
    </file:inbound-channel-adapter>
 
    <!-- 2) move the file to processing and setup header -->
    
    <file:outbound-gateway request-channel="batchFilesMarketplaceCategory" reply-channel="batchFilesMarketplaceCategoryProc"
        directory="#{baseDirectoryMarketplaceCategory}/processing" delete-source-files="true" />

	<!-- 3) transform csv to impex file -->
	
 	<int:service-activator input-channel="batchFilesMarketplaceCategoryProc" output-channel="batchFilesHeaderInit"
        ref="MarketplaceCategoryHeaderSetupTask" method="execute" />
 
 	<bean id="MarketplaceCategoryHeaderSetupTask" class="de.hybris.platform.acceleratorservices.dataimport.batch.task.HeaderSetupTask">
        <property name="catalog" value="mplProductCatalog" />
        <property name="net" value="false" />
        <property name="storeBaseDirectory" ref="baseDirectoryMarketplaceCategory" />
    </bean>   
    
 <!-- Transformer converters mappings -->
 
 		 <!-- Transformer for Category Import -->
    <bean id="batchCategoryConverterMapping"
    class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
    p:mapping="category"
    p:converter-ref="batchCategoryConverter"/>
    
     <!-- Transformer for Classification Attribute Import -->
      <bean id="batchClassificationAttributeConverterMapping"
    class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
    p:mapping="classification_attributes"
    p:converter-ref="batchClassificationAttributeConverter"/>
    
      <!-- Transformer for Classification Attribute Value Import -->
      <bean id="batchClassificationAttributeValueConverterMapping"
    class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
    p:mapping="classification_attribute_values"
    p:converter-ref="batchClassificationAttributeValueConverter"/>
    
      <!-- Transformer for Classification Class Import -->
    <bean id="batchClassificationClassConverterMapping"
    class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
    p:mapping="classification_class"
    p:converter-ref="batchClassificationClassConverter"/>
    
     <!-- Transformer for Class Attribute Assignment Import -->
    <bean id="batchClassAttributeAssignmentConverterMapping"
    class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
    p:mapping="class_attribute_assignment"
    p:converter-ref="batchClassAttributeAssignmentConverter"/>
    
 <bean id="batchMediaNewConverterMapping" 
		  class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping" 
		  p:mapping="mplmedia" 
		  p:converter-ref="batchMediaNewConverter"/>
		  
	<bean id="batchMediaMimeConverterMapping" 
		  class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping" 
		  p:mapping="mplmedia" 
		  p:converter-ref="batchMediaMimeConverter"/>

	<bean id="batchMediaContainerNewConverterMapping" 
		  class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping" 
		  p:mapping="mplmedia_container" 
		  p:converter-ref="batchMediaContainerNewConverter"/>

	<bean id="batchMediaProductNewConverterMapping"
	class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
	p:mapping="mplmedia_product"
	 p:converter-ref="batchMediaProductNewConverter" />
	 
	 <bean id="batchCategoryMediaConverterMapping"
	class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
	p:mapping="category_media"
	 p:converter-ref="batchCategoryMediaConverter" />
    
     <!-- Transformer for Rich attributes Import -->
    
    <bean id="batchProductRichAttributesMapping"
     class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
     p:mapping="richattribute_product"
     p:converter-ref="batchProductRichAttributesConverter"/>
    
    <!-- Transformer for Global Identifier Import -->
    
    <bean id="batchGlobalIdentifierMapping"
     class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
     p:mapping="global_identifier"
     p:converter-ref="batchGlobalIdentifierConverter"/>
      
      <!-- Transformer for Seo Import -->
    
    <bean id="batchSEOMapping"
     class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
     p:mapping="seocontent"
     p:converter-ref="batchSeoConverter"/>
     
      <!-- Transformer for Brand Import -->
   
    <bean id="batchBrandMapping"
     class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
     p:mapping="brand"
     p:converter-ref="batchBrandConverter"/>
     
    
      <!-- Transformer for Product Feature Import -->
      <bean id="batchProductFeatureMapping"
     class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
     p:mapping="product_feature"
     p:converter-ref="batchProductFeatureConverter"/>
     
      <!-- Transformer for Product Import -->
     <bean id="batchProductConverterMapping"
    class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
    p:mapping="mplproduct"
    p:converter-ref="batchProductConverter"/>
    
     <!-- Transformer for  Variant Product Import -->
    <bean id="batchVarProductConverterMapping"
    class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
    p:mapping="variant_product"
    p:converter-ref="batchVarProductConverter"/>
    
     <!-- Transformer for Product Relation Import -->
    <bean id="batchProdReferenceConverterMapping"
    class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
    p:mapping="product_reference"
    p:converter-ref="batchProdReferenceConverter"/>
    
 <!-- Transformer for Size Guide Import -->
    <bean id="bbatchProdSizeguideConverterMapping"
    class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
    p:mapping="product_sizeguide"
    p:converter-ref="batchProdSizeguideConverter"/>
    
    <bean id="batchSellerRichAttributesMapping"
     class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
     p:mapping="richattribute_seller"
     p:converter-ref="batchSellerRichAttributesConverter"/>
     
    <!-- Transformer for Seller Import -->    
     <bean id="batchSellerMapping"
     class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
     p:mapping="seller"
     p:converter-ref="batchSellerConverter"/>
     
      <!-- Transformer for Seller Import -->    
     <bean id="batchSalesCategoryMapping"
     class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
     p:mapping="sales_category"
     p:converter-ref="batchSalesCategoryConverter"/>
     
     <!--     Transformer for  Seller Delisting Import   -->
   
    <bean id="batchSellerDelistingConverterMapping"
    class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
    p:mapping="delist_seller"
    p:converter-ref="batchSellerDelistingConverter"/>
   
  <!--     Transformer for  SkuID Delisting Import   --> 
   
   <bean id="batchSkuIDDelistingConverterMapping"
    class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.mapping.impl.DefaultConverterMapping"
    p:mapping="delist_sku"
    p:converter-ref="batchSkuIDDelistingConverter"/>
    
 	  <!-- Converters -->
 	  
 	  <!-- Converter for Category Import -->
  	<bean id="batchCategoryConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
					$productCatalogName=Marketplace Product Catalog
					$classificationCatalog=pcmClassification
					$uidGroup=admingroup,marketplaceGroup,ETAILREAD
					$catalogVersion2=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
					$catalogVersion=catalogVersion(catalog(id),version)[unique=true]
				INSERT_UPDATE category;code[unique=true];name[lang=en];supercategories(code,$catalogVersion)[cellDecorator=com.tisl.mpl.core.celldecorator.SuperCategoryDecorator];$catalogVersion2;allowedPrincipals(uid);
           </value>
        </property>
        <property name="impexRow">
            <value>;{+0};{+1};{2};$productCatalog:Staged;$uidGroup</value>
        </property>
        </bean>
        
        <!-- Converter for Classification Attribute Import --> 
 	 <bean id="batchClassificationAttributeConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
					$productCatalogName=Marketplace Product Catalog
					$classificationCatalog=pcmClassification
					$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
					$classCatalogVersion=catalogversion(catalog(id[default='$classificationCatalog']),version[default='1'])[unique=true,default='$classificationCatalog:1']
					$classSystemVersion=systemVersion(catalog(id[default='$classificationCatalog']),version[default='1'])[unique=true]
					$class=classificationClass(ClassificationClass.code,$classCatalogVersion)[unique=true]
					$supercategories=source(code, $classCatalogVersion)[unique=true]
					$categories=target(code, $catalogVersion)[unique=true]
					$attribute=classificationAttribute(code,$classSystemVersion)[unique=true]
					$unit=unit(code,$classSystemVersion)
					$systemVersion=systemVersion(catalog(id),version)[default=pcmClassification:1]

				INSERT_UPDATE ClassificationAttribute;code[unique=true];name[lang=en];$systemVersion
            </value>
        </property>
        <property name="impexRow">
            <value>;{0};{1}</value>
        </property>
        </bean> 
        
        <!-- Converter for Classification Attribute Value Import --> 
        <bean id="batchClassificationAttributeValueConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
					$productCatalogName=Marketplace Product Catalog
					$classificationCatalog=pcmClassification
					$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
					$classCatalogVersion=catalogversion(catalog(id[default='$classificationCatalog']),version[default='1'])[unique=true,default='$classificationCatalog:1']
					$classSystemVersion=systemVersion(catalog(id[default='$classificationCatalog']),version[default='1'])[unique=true]
					$class=classificationClass(ClassificationClass.code,$classCatalogVersion)[unique=true]
					$supercategories=source(code, $classCatalogVersion)[unique=true]
					$categories=target(code, $catalogVersion)[unique=true]
					$attribute=classificationAttribute(code,$classSystemVersion)[unique=true]
					$unit=unit(code,$classSystemVersion)
					$systemVersion=systemVersion(catalog(id),version)[default=pcmClassification:1]
				INSERT_UPDATE ClassificationAttributeValue;code[unique=true];name[lang=en];$systemVersion
				</value>
        </property>
        <property name="impexRow">
            <value>;{0};{1};{2}</value>
        </property>
        </bean> 
       
       
       <!-- Converter for Classification Class Import --> 
 	  <bean id="batchClassificationClassConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
					$productCatalogName=Marketplace Product Catalog
					$classificationCatalog=pcmClassification
					$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
					$classCatalogVersion=catalogversion(catalog(id[default='$classificationCatalog']),version[default='1'])[unique=true,default='$classificationCatalog:1']
					$classSystemVersion=systemVersion(catalog(id[default='$classificationCatalog']),version[default='1'])[unique=true]
					$class=classificationClass(ClassificationClass.code,$classCatalogVersion)[unique=true]
					$supercategories=source(code, $classCatalogVersion)[unique=true]
					$categories=target(code, $catalogVersion)[unique=true]
					$attribute=classificationAttribute(code,$classSystemVersion)[unique=true]
					$unit=unit(code,$classSystemVersion)

				INSERT_UPDATE classificationclass;code[unique=true];name[lang=en];$classCatalogVersion
            </value>
        </property>
        <property name="impexRow">
            <value>;{0};{1}</value>
        </property>
        </bean>
        
        <!-- Converter for Class Attribute Assignment Import --> 
      <bean id="batchClassAttributeAssignmentConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
					$productCatalogName=Marketplace Product Catalog
					$classificationCatalog=pcmClassification
					$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
					$classCatalogVersion=catalogversion(catalog(id[default='$classificationCatalog']),version[default='1'])[unique=true,default='$classificationCatalog:1']
					$classSystemVersion=systemVersion(catalog(id[default='$classificationCatalog']),version[default='1'])[unique=true]
					$class=classificationClass(ClassificationClass.code,$classCatalogVersion)[unique=true]
					$supercategories=source(code, $classCatalogVersion)[unique=true]
					$categories=target(code, $catalogVersion)[unique=true]
					$attribute=classificationAttribute(code,$classSystemVersion)[unique=true]
					$unit=unit(code,$classSystemVersion)
				INSERT_UPDATE classAttributeAssignment;classificationAttribute(code)[unique=true];attributeType(code);classificationClass(code)[unique=true];attributeValues(code);mandatory(code);multiValued(code);
				
            </value>
        </property>
        <property name="impexRow">
            <value>;{0};{1};{2};{3};{4};{5}</value>
        </property>
        </bean> 
      <bean id="batchMediaNewConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
		<property name="header">
			<value>#{defaultImpexProductHeader}
				# Macros / Replacement Parameter definitions
				$productCatalog=mplProductCatalog
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
				$thumbnail=thumbnail(code, $catalogVersion)
				$picture=picture(code, $catalogVersion)
				$thumbnails=thumbnails(code, $catalogVersion)
				$detail=detail(code, $catalogVersion)
				$normal=normal(code, $catalogVersion)
				$others=others(code, $catalogVersion)
				$data_sheet=data_sheet(code, $catalogVersion)
				$medias=medias(code, $catalogVersion)
				$galleryImages=galleryImages(qualifier, $catalogVersion)
				$media=@media[translator=de.hybris.platform.impex.jalo.media.MediaDataTranslator]
				$URI=http:
				$folder=folder(qualifier)[default='images']
				INSERT_UPDATE Media;Qualifier;MediaStatus(code);mediaFormat(qualifier);code[unique=true];$media;mediaType(code)[default='Image'];mime[default='image/jpeg'];mediaPriority;description;$folder;$catalogVersion
			</value>
		</property>
		<property name="impexRow">
			<value>;{0};{1};{2};{3};$URI{4};{5};{6};{7};{8};;</value>
		</property>
	</bean>
	<bean id="batchMediaMimeConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
		<property name="header">
			<value>#{defaultImpexProductHeader}
				# Macros / Replacement Parameter definitions
				$productCatalog=mplProductCatalog
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
				$thumbnail=thumbnail(code, $catalogVersion)
				$picture=picture(code, $catalogVersion)
				$thumbnails=thumbnails(code, $catalogVersion)
				$detail=detail(code, $catalogVersion)
				$normal=normal(code, $catalogVersion)
				$others=others(code, $catalogVersion)
				$data_sheet=data_sheet(code, $catalogVersion)
				$medias=medias(code, $catalogVersion)
				$galleryImages=galleryImages(qualifier, $catalogVersion)
				$media=@media[translator=de.hybris.platform.impex.jalo.media.MediaDataTranslator]
				$URI=http:
				INSERT_UPDATE Media;code[unique=true];mime[default='image/jpeg'];$catalogVersion
			</value>
		</property>
		<property name="impexRow">
			<value>;{3};{6};</value>
		</property>
	</bean>
	<bean id="batchMediaContainerNewConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
		<property name="header">
			<value>#{defaultImpexProductHeader}
				# Macros / Replacement Parameter definitions
				$productCatalog=mplProductCatalog
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
				$thumbnail=thumbnail(code, $catalogVersion)
				$picture=picture(code, $catalogVersion)
				$thumbnails=thumbnails(code, $catalogVersion)
				$detail=detail(code, $catalogVersion)
				$normal=normal(code, $catalogVersion)
				$others=others(code, $catalogVersion)
				$data_sheet=data_sheet(code, $catalogVersion)
				$medias=medias(code, $catalogVersion)
				$galleryImages=galleryImages(qualifier, $catalogVersion)
				$media=@media[translator=de.hybris.platform.impex.jalo.media.MediaDataTranslator]
				$URI=http:				
				INSERT_UPDATE MediaContainer;qualifier[unique=true];medias(code, $catalogVersion);$catalogVersion
			</value>
		</property>
		<property name="impexRow">
			<value>;{+0};{+1};</value>
		</property>
	</bean>
	<bean id="batchCategoryMediaConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
		<property name="header">
			<value>#{defaultImpexProductHeader}
				$productCatalog=mplProductCatalog
					$productCatalogName=Marketplace Product Catalog
					$classificationCatalog=pcmClassification
					$uidGroup=admingroup,marketplaceGroup,ETAILREAD
					$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
					
			INSERT_UPDATE Category;code[unique=true];name([lang=en]);medias(code,$catalogVersion);$catalogVersion
		</value>
		</property>
		<property name="impexRow">
			<value>;{+0};{+1};{+2};</value>
		</property>
	</bean>
	
	<!-- Converter for Category Media Relation -->
	<bean id="batchMediaProductNewConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
		<property name="header">
			<value>#{defaultImpexProductHeader}
				# Macros / Replacement Parameter definitions
				$productCatalog=mplProductCatalog
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
				$thumbnail=thumbnail(code, $catalogVersion)
				$picture=picture(code, $catalogVersion)
				$thumbnails=thumbnails(code, $catalogVersion)
				$detail=detail(code, $catalogVersion)
				$normal=normal(code, $catalogVersion)
				$others=others(code, $catalogVersion)
				$data_sheet=data_sheet(code, $catalogVersion)
				$medias=medias(code, $catalogVersion)
				$galleryImages=galleryImages(qualifier, $catalogVersion)
				$media=@media[translator=de.hybris.platform.impex.jalo.media.MediaDataTranslator]
				$URI=http:
				UPDATE Product;code[unique=true];$picture;$thumbnail;$detail;$others;$normal;$thumbnails;$galleryImages;$catalogVersion
			</value>
		</property>
		<property name="impexRow">
			<value>;{0};{1};{2};{3};{4};{5};{6};{7};</value>
		</property>
	</bean>
	
		<!-- Converter for Product Relation Import --> 
 	         
        <bean id="batchProdReferenceConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
            	$preselected=preselected[default='true']
					$productCatalogName=Marketplace Product Catalog
					$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
					$supercategories=supercategories(code, $catalogVersion)
					$baseProduct=baseProduct(code,$catalogVersion)
					$approved=approvalstatus(code)[default='check']
					# Insert Product References
					INSERT_UPDATE ProductReference;source(code,$catalogVersion)[unique=true];target(code,$catalogVersion)[unique=true];active;referenceType(code);$preselected	
            </value>
        </property>
        <property name="impexRow">
            <value>;{+0};{+1};{+2};{+3}</value>
        </property>
        </bean>  
        <!-- Converter for Brand Import --> 
   
    <bean id="batchBrandConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
       <property name="header">
 	     <value> # Insert Brand
 	     $productCatalog=mplProductCatalog
				$classificationCatalog=pcmClassification
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
               INSERT_UPDATE Brand;name[unique=true];description;productSource(code,$catalogVersion)[unique=true];$catalogVersion
            </value>
        </property>
        <property name="impexRow">
            <value>;{+0};{1};{+2}</value>
        </property>
        
    </bean>
    
     <!-- Converter for SEO Import --> 
     <bean id="batchSeoConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value># Insert SEO
            	$productCatalog=mplProductCatalog
				$classificationCatalog=pcmClassification
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
              INSERT_UPDATE SeoContent;seoMetaTitle[unique=true];seoMetaKeyword[unique=true];seoMetaDescription[unique=true];tags;productSource(code,$catalogVersion)[unique=true];$catalogVersion
            </value>
        </property>
        <property name="impexRow">
            <value>;{0};{1};{2};{3};{+4}</value>
        </property>
       </bean>
    
 	           <!-- Converter for Global Identifier Import -->
 	            
  <bean id="batchGlobalIdentifierConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
       <property name="header">
 	     <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
				$classificationCatalog=pcmClassification
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
				
			  # Insert Global Identifier
              INSERT_UPDATE GlobalIdentifier;productSource(code,$catalogVersion)[unique=true];globalIdentifierType(code);globalIdentifierTypeValue[unique=true][mode=append];$catalogVersion
        </value>
        </property>
        <property name="impexRow">
            <value>;{+0};{+1};{+2};{3}</value>
        </property>
                    </bean>
   
      
    <!-- Converter for Product Feature Import --> 
    
    <bean id="batchProductFeatureConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
$productCatalogName=Marketplace Product Catalog
$classificationCatalog=pcmClassification
$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
$classCatalogVersion=catalogversion(catalog(id[default='$classificationCatalog']),version[default='1.0'])[unique=true,default='$classificationCatalog:1.0']
$classSystemVersion=systemVersion(catalog(id[default='$classificationCatalog']),version[default='1.0'])[unique=true]
$categories=target(code, $catalogVersion)[unique=true]
$classAttributeAssignment=classificationAttributeAssignment(classificationAttribute(code),classificationClass(code))
$language=language(isocode)[default='en'][unique=true];
 INSERT_UPDATE ProductFeature;classificationAttributeAssignment(classificationAttribute(code,systemVersion(catalog(id),version)),classificationClass(catalogVersion(catalog(id),version),code),systemVersion(catalog(id),version));product(code,$catalogVersion)[unique=true,forceWrite=true,allownull=true];qualifier[unique=true,forceWrite=true,allownull=true];unit(code,systemVersion(catalog(id),version),unitType)[unique=true];valueType;value[translator=de.hybris.platform.catalog.jalo.classification.impex.ProductFeatureValueTranslator,allownull=true]
         </value>
        </property>
        <property name="impexRow">
            <value>;{+0};{+1};{2};{3};{4};{5}</value>
        </property>
        
       </bean>
       
                  
           <!-- Converter for Product Import --> 
    <bean id="batchProductConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
				$supercategories=supercategories(code, $catalogVersion)
				$baseProduct=baseProduct(code,$catalogVersion)
				$approved=approvalstatus(code)[default='approved']
				$unit=unit(code)[default='pieces']
				$clAttrModifiers=system='pcmClassification',version='1',translator=de.hybris.platform.catalog.jalo.classification.impex.ClassificationAttributeTranslator,lang=en
				$catalogversion=catalogversion(catalog(id[default=mplProductCatalog]),version[default='Staged'])[unique=true,default=mplProductCatalog:Staged]
				$variantType=variantType(code)[default='PcmProductVariant']
    			$lang=en
    		      
				
				INSERT_UPDATE Product;code[unique=true];name[lang=$lang];title;articleMiniDescription;articleDescription;createdOn[dateformat=yyyyMMddHHmmss];reviews;mrp;$supercategories;deliveryModes(code);variantType(code);sequenceId[translator=de.hybris.platform.acceleratorservices.dataimport.batch.converter.SequenceIdTranslator];$catalogversion;$approved;$unit 
            </value>
        </property>
        <property name="impexRow">
            <value>;{+0};{+1};{2};{3};{4};{5};{6};{7};{8};{+9};{10};{S}</value>
        </property>
        </bean>
     
                
    <!-- Converter for Variant Product Import --> 
     <bean id="batchVarProductConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
				$supercategories=supercategories(code, $catalogVersion)
				$baseProduct=baseProduct(code,$catalogVersion)
				$approved=approvalstatus(code)[default='approved']
				$unit=unit(code)[default='pieces']
				$clAttrModifiers=system='pcmClassification',version='1',translator=de.hybris.platform.catalog.jalo.classification.impex.ClassificationAttributeTranslator,lang=en
				$catalogversion=catalogversion(catalog(id[default=mplProductCatalog]),version[default='Staged'])[unique=true,default=mplProductCatalog:Staged]
				          
				INSERT_UPDATE PcmProductVariant;code[unique=true,alias=PIMID];name[lang=$lang];title;articleMiniDescription;articleDescription;createdOn[dateformat=yyyyMMddHHmmss];size;colour;baseProduct(code,$catalogVersion);reviews;mrp;$supercategories;deliveryModes(code);capacity;$catalogversion;$approved;$unit;
            </value>
        </property>
        <property name="impexRow">
            <value>;{+0};{+1};{2};{3};{4};{5};{6};{7};{8};{9};{10};{11};{+12};{13}</value>
        </property>
        </bean>
        
      <!-- Converter for Rich Attributes For Product Import --> 
     <bean id="batchProductRichAttributesConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
				$supercategories=supercategories(code, $catalogVersion)
				$baseProduct=baseProduct(code,$catalogVersion)
				$approved=approvalstatus(code)[default='check']
				$unit=unit(code)[default='pieces']
				$clAttrModifiers=system='pcmClassification',version='1',translator=de.hybris.platform.catalog.jalo.classification.impex.ClassificationAttributeTranslator,lang=en
				$catalogversion=catalogversion(catalog(id[default=mplProductCatalog]),version[default='Staged'])[unique=true,default=mplProductCatalog:Staged]
				          
				INSERT_UPDATE RichAttribute;typeOfItem1(code);typeOfItem2(code);shippingmodes(code);paymentModes(code);deliveryfulfillmodes(code);cancellationwindow;returnwindow;replacementwindow;exchangeallowedwindow;warrantyType(code);warrantyPeriod;ispromotionallowed(code);leadtimeforhomedelivery;sellerfulfilledshippingcharge;productsource(code,$catalogVersion)[unique=true];$catalogversion
			</value>
        </property>
        <property name="impexRow">
            <value>;{0};{1};{2};{+3};{+4};{5};{6};{7};{8};{9};{10};{11};{12};{13};{+14}</value>
        </property>
        </bean>
         <!-- Converter for SizeGuide For Product Import --> 
     <bean id="batchProdSizeguideConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
				$supercategories=supercategories(code, $catalogVersion)
				$baseProduct=baseProduct(code,$catalogVersion)
				$approved=approvalstatus(code)[default='check']
				$unit=unit(code)[default='pieces']
				$clAttrModifiers=system='pcmClassification',version='1',translator=de.hybris.platform.catalog.jalo.classification.impex.ClassificationAttributeTranslator,lang=en
				$catalogversion=catalogversion(catalog(id[default=mplProductCatalog]),version[default='Staged'])[unique=true,default=mplProductCatalog:Staged]
				          
				INSERT_UPDATE SizeGuide;sizeGuideId[unique=true]; dimension[unique=true]; unit[unique=true];size[unique=true];value[unique=true];categoryCode;brand;fitType;imageUrl;$catalogVersion
			</value>
        </property>
        <property name="impexRow">
            <value>;{+0};{1};{2};{3};{4};{5};{6};{7};{8};</value>
        </property>
        </bean>
	
	        <!-- Converter for Seller Import --> 

    <bean id="batchSellerConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
				$classificationCatalog=pcmClassification
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
				$languages=ja,en,de,zh
				$uidGroup=admingroup,marketplaceGroup,ETAILREAD
				$supercategories=supercategories( code, catalogVersion(catalog(id[default='mplProductCatalog']),version[default='Staged']));;;;;;;;;
                $catalogVersion=catalogVersion(catalog(id[default='mplProductCatalog']),version[default='Staged'])[unique=true,default='mplProductCatalog:Staged'];;;;;;;;;
               
             INSERT_UPDATE SellerInformation;productSource(code,$catalogVersion);sellerSKU[unique=true][mode=append];sellerArticleSku[unique=true][mode=append];USSID[unique=true][mode=append];sellerId;sellerName;sellerType;startDate[dateformat=yyyyMMddHHmmss];endDate[dateformat=yyyyMMddHHmmss];inwardDate[dateformat=yyyyMMddHHmmss];$catalogVersion
            </value>
        </property>
        <property name="impexRow">
        <value>;{+0};{+1};{+2};{+2};{+3};{4};{5};{6};{7};{8}</value>
        </property>
       </bean>


 <bean id="batchSalesCategoryConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	INSERT_UPDATE SellerSalesCategory;sellerRootCategoryId[unique=true];sellerId[unique=true];active
            </value>
        </property>
        <property name="impexRow">
        <value>;{+0};{+1};{+2}</value>
        </property>
       </bean>

        <!-- Converter for SkuID Delisting Relation Import -->
        
        <bean id="batchSkuIDDelistingConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
				$classificationCatalog=pcmClassification
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
				$languages=ja,en,de,zh
				$uidGroup=admingroup,marketplaceGroup,ETAILREAD
				$supercategories=supercategories( code, catalogVersion(catalog(id[default='mplProductCatalog']),version[default='Staged']));;;;;;;;;
                $catalogVersion=catalogVersion(catalog(id[default='mplProductCatalog']),version[default='Staged'])[unique=true,default='mplProductCatalog:Staged'];;;;;;;;;
               
             INSERT_UPDATE SellerInformation;sellerArticleSku[unique=true];sellerId;delisting;$catalogVersion
            </value>
        </property>
        <property name="impexRow">
            <value>;{+0};{+1};{+2};{+3}</value>
        </property>
        </bean>
        
        <!-- Converter for Seller Delisting Relation Import -->
        
        <bean id="batchSellerDelistingConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
				$classificationCatalog=pcmClassification
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
				$languages=ja,en,de,zh
				$uidGroup=admingroup,marketplaceGroup,ETAILREAD
				$supercategories=supercategories( code, catalogVersion(catalog(id[default='mplProductCatalog']),version[default='Staged']));;;;;;;;;
                $catalogVersion=catalogVersion(catalog(id[default='mplProductCatalog']),version[default='Staged'])[unique=true,default='mplProductCatalog:Staged'];;;;;;;;;
               
             INSERT_UPDATE SellerInformation;sellerId;delisting;blockOMS;$catalogVersion
            </value>
        </property>
        <property name="impexRow">
            <value>;{+0};{+1};{+2};{+3}</value>
        </property>
        </bean>
        
         <!-- Converter for Rich Attributes For Product Import --> 
     <bean id="batchSellerRichAttributesConverter" class="de.hybris.platform.acceleratorservices.dataimport.batch.converter.impl.DefaultImpexConverter">
        <property name="header">
            <value>#{defaultImpexProductHeader}
            	$productCatalog=mplProductCatalog
				$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Staged'])[unique=true,default=$productCatalog:Staged]
				$supercategories=supercategories(code, $catalogVersion)
				$baseProduct=baseProduct(code,$catalogVersion)
				$approved=approvalstatus(code)[default='check']
				$unit=unit(code)[default='pieces']
				$clAttrModifiers=system='pcmClassification',version='1',translator=de.hybris.platform.catalog.jalo.classification.impex.ClassificationAttributeTranslator,lang=en
				$catalogversion=catalogversion(catalog(id[default=mplProductCatalog]),version[default='Staged'])[unique=true,default=mplProductCatalog:Staged]
				          
				INSERT_UPDATE RichAttribute;homeDelivery(code);expressDelivery(code);clickAndCollect(code);typeOfItem1(code);typeOfItem2(code);shippingmodes(code);paymentModes(code);deliveryfulfillmodes(code);cancellationwindow;returnwindow;replacementwindow;exchangeallowedwindow;warrantyType(code);warrantyPeriod;ispromotionallowed(code);leadtimeforhomedelivery;sellerfulfilledshippingcharge;sellerInfo(sellerArticleSKU,$catalogVersion)[unique=true];$catalogversion
			</value>
        </property>
        <property name="impexRow">
            <value>;{+0};{+1};{+2};{3};{4};{5};{+6};{+7};{8};{9};{10};{11};{12};{13};{14};{15};{16};{+17}</value>
        </property>
        </bean>
  </beans>
