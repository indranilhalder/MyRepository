function registerUserGigya(a){var b=encodeURIComponent(a.UID),c=encodeURIComponent(a.timestamp),d=encodeURIComponent(a.signature);$.ajax({url:ACC.config.encodedContextPath+"/oauth2callback/socialLogin/",data:{referer:window.location.href,emailId:a.user.email,fName:a.user.firstName,lName:a.user.lastName,uid:b,timestamp:c,signature:d,provider:a.user.loginProvider},type:"GET",cache:!1,success:function(a){if(a)if(-1<a.indexOf(ACC.config.encodedContextPath))window.open(a,"_self");else{var d=window.location.host;
0<=d.indexOf(":")?window.open(ACC.config.encodedContextPath+a,"_self"):window.open("https://"+d+ACC.config.encodedContextPath+a,"_self")}},error:function(a){console.log("Error Occured Login Page"+a)}})}function loadGigya(){gigya.socialize.addEventHandlers({context:{str:"congrats on your"},onLogin:onLoginHandlerGigya})}function onLoginHandlerGigya(a){registerUserGigya(a)}
var ratingsParams={categoryID:$("input[name=gigya_product_root_category]").val(),streamID:$("input[name=gigya_product_code]").val(),containerID:"ratingDiv",linkedCommentsUI:"commentsDiv",showCommentButton:"true",onAddReviewClicked:reviewClick};gigya.comments.showRatingUI(ratingsParams);
var params={categoryID:$("input[name=gigya_product_root_category]").val(),streamID:$("input[name=gigya_product_code]").val(),scope:"both",privacy:"public",version:2,containerID:"commentsDiv",onCommentSubmitted:reviewCount,cid:"",enabledShareProviders:"facebook,twitter",enabledProviders:"facebook,google,twitter",onLoad:commentBox,onError:onErrorHandler};gigya.comments.showCommentsUI(params);var pageName=$("#pageName").val();
"undefined"!=typeof pageName&&"Product Details"==pageName&&$(document).ready(function(){getRating($("input[name=gigya_api_key]").val(),$("input[name=gigya_product_code]").val(),$("input[name=gigya_product_root_category]").val())});function commentBox(a){$("#commentsDiv .gig-comments-subscribe").hide();$("#commentsDiv .gig-composebox-logout").hide();CheckonReload()}
function onErrorHandler(a){$(".gig-composebox-error").text(a.errorDetails);$(".gig-composebox-error").show();"product"==pageType&&utag.link({error_type:"review_submit_error",error_message:a.errorMessage})}
function reviewCount(a){var b=$("input[name=gigya_product_root_category]").val(),c=a.commentTitle;console.log("Review Count inside show comments ui   "+a);var d=a.ratings._overall,h="not_applicable",e="not_applicable";if("Electronics"!=b)var h=a.ratings.Fit,g=a.ratings.Quality,f=a.ratings["Value for Money"];"Electronics"==b&&(e=a.ratings["Ease of use"],g=a.ratings.Quality,f=a.ratings["Value for Money"]);utag.link({link_text:c.replace(/ /g,"_").toLowerCase(),event_type:"review_post",review_overall_rating:d,
review_quality:g,review_ease_of_use:e,review_fit:h,review_value_for_money:f,user_product_rating:d,Seller_rating:" ",product_id:productIdArray});getRating($("input[name=gigya_api_key]").val(),$("input[name=gigya_product_code]").val(),$("input[name=gigya_product_root_category]").val())}function reviewClick(a){CheckUserLogedIn()}
function getRating(a,b,c){$.getJSON("https://comments.us1.gigya.com/comments.getStreamInfo?apiKey="+a+"&categoryID="+c+"&streamId="+b+"&includeRatingDetails=true&format=jsonp&callback=?",function(a){if(void 0!=a&&void 0!=a.streamInfo){var h=a.streamInfo.ratingCount,e=a.streamInfo.ratingDetails._overall.ratings,e=e.reverse();$("div.rate-details div.after").each(function(a){var b=e[a];$("div.rate-bar div.rating").eq(a).css({width:b/h*100+"%"});$("div.rate-details div.after").eq(a).text(e[a])});var g=
a.streamInfo.avgRatings._overall,f=a.streamInfo.ratingCount;$(".product-detail ul.star-review a").empty();$(".product-detail ul.star-review li").attr("class","empty");for(var k=Math.floor(g),m=g-k,l=0;l<k;l++)$("#pdp_rating li").eq(l).removeClass("empty").addClass("full");0!=m&&$("#pdp_rating li").eq(k).removeClass("empty").addClass("half");1==f?($(".gig-rating-readReviewsLink_pdp").text(f+" REVIEW"),$("#ratingDiv .gig-rating-readReviewsLink").text(a.streamInfo.ratingCount+" REVIEW")):0<f&&($(".gig-rating-readReviewsLink_pdp").text(f+
" REVIEWS"),$("#ratingDiv .gig-rating-readReviewsLink").text(a.streamInfo.ratingCount+" REVIEWS"));$("#customer").text("Customer Reviews ("+a.streamInfo.ratingCount+")");utag.link({product_rating:g})}gigya.comments.showRatingUI({categoryID:c,streamID:b,containerID:"ratingDiv",linkedCommentsUI:"commentsDiv",showCommentButton:"true",onAddReviewClicked:function(a){CheckUserLogedIn()}})})}
function CheckUserLogedIn(){var a=getCookie("mpl-user");"session"==getCookie("mpl-userType")&&"anonymous"==a&&gotoLogin()}void 0!=typeof $("#loginDiv").html()&&gigya.socialize.showLoginUI({height:100,width:330,showTermsLink:!1,hideGigyaLink:!0,buttonsStyle:"signInWith",containerID:"loginDiv",cid:"",enabledProviders:"facebook,google"});
void 0!=typeof $("#loginDivReg").html()&&gigya.socialize.showLoginUI({height:100,width:330,showTermsLink:!1,hideGigyaLink:!0,buttonsStyle:"signInWith",containerID:"loginDivReg",cid:"",enabledProviders:"facebook,google"});void 0!=typeof $("#loginDivCheckout").html()&&gigya.socialize.showLoginUI({height:100,width:330,showTermsLink:!1,hideGigyaLink:!0,buttonsStyle:"signInWith",containerID:"loginDivCheckout",cid:"",enabledProviders:"facebook,google"});
void 0!=typeof $("#loginDivsiginflyout").html()&&gigya.socialize.showLoginUI({height:100,width:330,showTermsLink:!1,hideGigyaLink:!0,buttonsStyle:"signInWith",containerID:"loginDivsiginflyout",cid:"",enabledProviders:"facebook,google"});function getPdpRatingOnSizeSelect(a,b,c){getRating(a,b,c)}
function lazyLoadGigyaCommentsUi(){if($(window).scrollTop()+$(window).height()>=$("#ReviewSecion").offset().top&&"true"!=$("#ReviewSecion .commentcontent").attr("loaded")&&($("#ReviewSecion .commentcontent").attr("loaded",!0),0==$("#ReviewSecion ul#commentsDiv").children().length)){var a={categoryID:$("input[name=gigya_product_root_category]").val(),streamID:$("input[name=gigya_product_code]").val(),scope:"both",privacy:"public",version:2,containerID:"commentsDiv",onCommentSubmitted:reviewCount,cid:"",
enabledShareProviders:"facebook,twitter",enabledProviders:"facebook,google,twitter",onLoad:commentBox,onError:onErrorHandler};gigya.comments.showCommentsUI(a)}};
